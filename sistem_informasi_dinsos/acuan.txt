<button data-edit_id="<?= $n['order_id'] ?>"
    class="btn btn-warning btn-sm rounded-5 tombolEditOrder"
    data-bs-toggle="modal"
    data-bs-target="#editOrderModal">
    <i class="bi bi-pencil"></i>
</button> 

<!-- Modal edit-->
  <div class="modal fade" id="editOrderModal" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h5>Edit Order</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <form action="orders.php" method="post">
            <input type="hidden" name="order_id" id="idOrder">
            <label class="form-label">Metode Pembayaran</label>
              <select class="form-select" name="payment_method" required id="metodeBayar">
                <option value="cash">Cash</option>
                <option value="qris/transfer">Qris/Transfer</option>
              </select>
            <label class="form-label">Status Pembayaran</label>
              <select class="form-select" name="payment_status" required id="statusBayar">
                <option value="pending">pending</option>
                <option value="paid">paid</option>
                <option value="refunded">rufunded</option>
              </select>
            <label class="form-label">Status Pesanan</label>
              <select class="form-select" name="status" required id="statusPesanan">
                <option value="processing">processing</option>
                <option value="completed">completed</option>
                <option value="cancelled">cancelled</option>
              </select>    
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" style="text-decoration: none;" data-bs-dismiss="modal">batal</button>
              <button type="submit" class="btn btn-primary" name="submitEditOrder">Simpan</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>

  $(function(){

        $(document).on('click', '.tombolEditOrder', function() {

          const edit_id = $(this).data('edit_id');
          
          $.ajax({
            url: 'get_data.php',
            data: {edit_id : edit_id},
            method: 'post',
            dataType: 'json',
            success: function(data){
              $('#idOrder').val(data.order_id);
              $('#metodeBayar').val(data.payment_method);
              $('#statusPesanan').val(data.status);
            }
          });

        });

      });

if (isset($_POST['edit_id'])) {
    $id = $_POST['edit_id'];

    $stmt = $conn->prepare("SELECT * FROM orders WHERE order_id = ?");
    $stmt->bind_param("i", $id);
    $stmt->execute();
    
    $result = $stmt->get_result();
    $dataOrder = $result->fetch_assoc();

    echo json_encode($dataOrder);
}
